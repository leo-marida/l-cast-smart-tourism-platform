<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>L-CAST Admin Command Center</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <style>
        body {
            background-color: #f0f2f5;
        }
        .dashboard-card {
            background: #ffffff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .friction-high {
            color: red;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <h1 class="mb-4">
            L-CAST <span class="text-primary">Admin Portal</span>
        </h1>

        <!-- Stats -->
        <div class="row g-3">
            <div class="col-md-4">
                <div class="dashboard-card text-center">
                    <h3>Users</h3>
                    <h1 id="userCount">—</h1>
                </div>
            </div>

            <div class="col-md-4">
                <div class="dashboard-card text-center">
                    <h3>POIs</h3>
                    <h1 id="poiCount">—</h1>
                </div>
            </div>

            <div class="col-md-4">
                <div class="dashboard-card text-center">
                    <h3>System Status</h3>
                    <h4 class="text-success">Operational</h4>
                </div>
            </div>
        </div>

        <!-- POI Management -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="dashboard-card">
                    <h4>Safety Override (Friction Index Control)</h4>

                    <table class="table table-hover mt-3">
                        <thead>
                            <tr>
                                <th>Region</th>
                                <th>Safety Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="poiTable"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (optional, but safe to include) -->
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    ></script>

    <script>
        const API_URL = 'http://localhost:3000/api/admin';
        const token = localStorage.getItem('adminToken');

        async function fetchStats() {
            // Mock data (replace with real API calls later)
            const users = 124;
            const pois = 58;

            const regions = [
                { name: 'Beirut', status: 'Safe' },
                { name: 'South', status: 'Caution' },
                { name: 'Bekaa', status: 'Safe' }
            ];

            document.getElementById('userCount').textContent = users;
            document.getElementById('poiCount').textContent = pois;

            const tableBody = document.getElementById('poiTable');
            tableBody.innerHTML = ''; // prevent duplication on reload

            regions.forEach(region => {
                const tr = document.createElement('tr');

                tr.innerHTML = `
                    <td>${region.name}</td>
                    <td class="${region.status === 'Caution' ? 'text-warning' : 'text-success'}">
                        ${region.status}
                    </td>
                    <td>
                        <button class="btn btn-sm btn-danger" onclick="toggleAlert('${region.name}')">
                            Toggle Alert
                        </button>
                    </td>
                `;

                tableBody.appendChild(tr);
            });
        }

        function toggleAlert(regionName) {
            alert(`Alert toggled for ${regionName}`);
            // later: call backend API here
        }

        fetchStats();
    </script>
</body>
</html>
